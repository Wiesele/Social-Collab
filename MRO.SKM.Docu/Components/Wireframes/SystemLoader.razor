@using System.Reflection
@using System.Runtime.CompilerServices
@using MRO.SKM.SDk.Extensions
@using MRO.SMK.Docu.ApplicationCore.Services
@inject LoaderService loaderService

<MudOverlay Visible="@loaderService.Visible" DarkBackground="true">
    <MudCard Style="padding: 100px">
        <MudCardHeader>
            <CardHeaderContent>
                <MudGrid Justify="Justify.Center">
                    <MudItem sm="12" Class="d-flex align-center justify-center">
                        <MudText Typo="Typo.h6">Bitte Warten</MudText>
                    </MudItem>
                </MudGrid>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardContent>
            <MudGrid Justify="Justify.Center">
                <MudItem sm="12" Class="d-flex align-center justify-center">
                    <MudProgressCircular Color="Color.Primary" Indeterminate="true"/>
                </MudItem>
                @if (!this.loaderService.Text.IsNullOrWhiteSpace())
                {
                    <MudItem sm="12" Class="d-flex align-center justify-center">
                        <MudText>@this.loaderService.Text</MudText>
                    </MudItem>
                }
            </MudGrid>
        </MudCardContent>
    </MudCard>
</MudOverlay>

@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();

        this.loaderService.RegisterCallback(async () =>
        {
            this.StateHasChanged();
        });
    }
}